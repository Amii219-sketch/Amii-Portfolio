<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  const images = [
    {src:"images/work1.jpg", title:"優しい呼吸", caption:"透明水彩 / 2024", year:2024},
    {src:"images/work2.jpg", title:"百万年の孤独", caption:"透明水彩 / 2025", year:2025},
    {src:"images/work3.jpg", title:"胡蝶の夢", caption:"透明水彩 / 2025", year:2025},
    {src:"images/work4.jpg", title:"帰郷", caption:"顔彩 / 2025", year:2025},
    {src:"images/work5.jpg", title:"すべて私の記憶", caption:"透明水彩 / 2025", year:2025},
    {src:"images/work6.jpg", title:"この悲しみを愛とは呼ばない", caption:"透明水彩 / 2025", year:2025},
    {src:"images/work7.jpg", title:"好日", caption:"顔彩 / 2024", year:2024},
    {src:"images/work8.jpg", title:"海に眠る", caption:"顔彩 / 2025", year:2025},
    {src:"images/work9.jpg", title:"おやすみガオガオ", caption:"顔彩 / 2025", year:2025},
    {src:"images/work10.jpg", title:"この香りを憶えている", caption:"透明水彩 / 2024", year:2024},
    {src:"images/work11.jpg", title:"大丈夫", caption:"アクリルガッシュ / 2022", year:2022},
    {src:"images/work12.jpg", title:"私が私であるために", caption:"透明水彩 / 2025", year:2025},
    {src:"images/work13.jpg", title:"安全地帯", caption:"アクリルガッシュ・胡粉 / 2025", year:2025},
    {src:"images/work14.jpg", title:"木星と猫", caption:"透明水彩 / 2025", year:2025},
    {src:"images/work15.jpg", title:"君がいる星", caption:"透明水彩 / 2021", year:2021},
    {src:"images/work16.jpg", title:"ごろんねこ", caption:"アクリルガッシュ / 2022", year:2022},
    {src:"images/work17.jpg", title:"おやすみに魔法をかけて", caption:"アクリルガッシュ / 2022", year:2022},
  ];

  // 年の降順で並び替え
  images.sort((a, b) => b.year - a.year);

  const col1 = document.getElementById("col1");
  const col2 = document.getElementById("col2");

  function renderMasonry() {
    col1.innerHTML = "";
    col2.innerHTML = "";

    images.forEach(data => {
      const img = document.createElement("img");
      img.src = data.src;
      img.alt = data.title;
      img.dataset.title = data.title;
      img.dataset.caption = data.caption;

      if (col1.offsetHeight <= col2.offsetHeight) {
        col1.appendChild(img);
      } else {
        col2.appendChild(img);
      }

      img.addEventListener("click", () => {
        const lightbox = document.getElementById("lightbox");
        const lightboxImg = lightbox.querySelector("img");
        const lightboxTitle = lightbox.querySelector("h3");
        const lightboxCaption = lightbox.querySelector("p");

        lightbox.style.display = "flex";
        lightboxImg.src = img.src;
        lightboxTitle.textContent = img.dataset.title;
        lightboxCaption.textContent = img.dataset.caption;
      });
    });
  }

  // すべての画像が読み込まれてから実行
  window.addEventListener("load", renderMasonry);

  // ライトボックス閉じる処理
  const lightbox = document.getElementById('lightbox');
  lightbox.addEventListener('click', (e) => {
    if (e.target === e.currentTarget) {
      lightbox.style.display = 'none';
    }
  });
  document.addEventListener('keydown', (e) => {
    if (e.key === "Escape") {
      lightbox.style.display = 'none';
    }
  });
</script>
